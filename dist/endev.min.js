/*! endev 0.2.0 2015-03-18 */

!function(a,b,c,d){function e(b){"use strict";function c(){b.escapeMode===d&&(b.escapeMode=!0),b.attributePrefix=b.attributePrefix||"_",b.arrayAccessForm=b.arrayAccessForm||"none",b.emptyNodeForm=b.emptyNodeForm||"text",b.enableToStringFunc===d&&(b.enableToStringFunc=!0),b.arrayAccessFormPaths=b.arrayAccessFormPaths||[],b.skipEmptyTextNodesForObj===d&&(b.skipEmptyTextNodesForObj=!0),b.stripWhitespaces===d&&(b.stripWhitespaces=!0),b.datetimeAccessFormPaths=b.datetimeAccessFormPaths||[]}function e(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}function f(a){var b=a.localName;return null==b&&(b=a.baseName),(null==b||""==b)&&(b=a.nodeName),b}function g(a){return a.prefix}function h(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):a}function i(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function j(a,c,d){switch(b.arrayAccessForm){case"property":a[c+"_asArray"]=a[c]instanceof Array?a[c]:[a[c]]}if(!(a[c]instanceof Array)&&b.arrayAccessFormPaths.length>0){for(var e=0;e<b.arrayAccessFormPaths.length;e++){var f=b.arrayAccessFormPaths[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(a,c,d))break}e!=b.arrayAccessFormPaths.length&&(a[c]=[a[c]])}}function k(a){var b=a.split(/[-T:+Z]/g),c=new Date(b[0],b[1]-1,b[2]),d=b[5].split(".");if(c.setHours(b[3],b[4],d[0]),d.length>1&&c.setMilliseconds(d[1]),b[6]&&b[7]){var e=60*b[6]+Number(b[7]),f=/\d\d-\d\d:\d\d$/.test(a)?"-":"+";e=0+("-"==f?-1*e:e),c.setMinutes(c.getMinutes()-e-c.getTimezoneOffset())}else-1!==a.indexOf("Z",a.length-1)&&(c=new Date(Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())));return c}function l(a,c,d){if(b.datetimeAccessFormPaths.length>0){for(var e=d.split(".#")[0],f=0;f<b.datetimeAccessFormPaths.length;f++){var g=b.datetimeAccessFormPaths[f];if("string"==typeof g){if(g==e)break}else if(g instanceof RegExp){if(g.test(e))break}else if("function"==typeof g&&g(obj,c,e))break}return f!=b.datetimeAccessFormPaths.length?k(a):a}return a}function m(a,c){if(a.nodeType==y.DOCUMENT_NODE){for(var d=new Object,e=a.childNodes,h=0;h<e.length;h++){var k=e.item(h);if(k.nodeType==y.ELEMENT_NODE){var n=f(k);d[n]=m(k,n)}}return d}if(a.nodeType==y.ELEMENT_NODE){var d=new Object;d.__cnt=0;for(var e=a.childNodes,h=0;h<e.length;h++){var k=e.item(h),n=f(k);k.nodeType!=y.COMMENT_NODE&&(d.__cnt++,null==d[n]?(d[n]=m(k,c+"."+n),j(d,n,c+"."+n)):(null!=d[n]&&(d[n]instanceof Array||(d[n]=[d[n]],j(d,n,c+"."+n))),d[n][d[n].length]=m(k,c+"."+n)))}for(var o=0;o<a.attributes.length;o++){var p=a.attributes.item(o);d.__cnt++,d[b.attributePrefix+p.name]=p.value}var q=g(a);return null!=q&&""!=q&&(d.__cnt++,d.__prefix=q),null!=d["#text"]&&(d.__text=d["#text"],d.__text instanceof Array&&(d.__text=d.__text.join("\n")),b.escapeMode&&(d.__text=i(d.__text)),b.stripWhitespaces&&(d.__text=d.__text.trim()),delete d["#text"],"property"==b.arrayAccessForm&&delete d["#text_asArray"],d.__text=l(d.__text,n,c+"."+n)),null!=d["#cdata-section"]&&(d.__cdata=d["#cdata-section"],delete d["#cdata-section"],"property"==b.arrayAccessForm&&delete d["#cdata-section_asArray"]),1==d.__cnt&&null!=d.__text?d=d.__text:0==d.__cnt&&"text"==b.emptyNodeForm?d="":d.__cnt>1&&null!=d.__text&&b.skipEmptyTextNodesForObj&&(b.stripWhitespaces&&""==d.__text||""==d.__text.trim())&&delete d.__text,delete d.__cnt,!b.enableToStringFunc||null==d.__text&&null==d.__cdata||(d.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),d}return a.nodeType==y.TEXT_NODE||a.nodeType==y.CDATA_SECTION_NODE?a.nodeValue:void 0}function n(a,c,d,e){var f="<"+(null!=a&&null!=a.__prefix?a.__prefix+":":"")+c;if(null!=d)for(var g=0;g<d.length;g++){var i=d[g],j=a[i];b.escapeMode&&(j=h(j)),f+=" "+i.substr(b.attributePrefix.length)+"='"+j+"'"}return f+=e?"/>":">"}function o(a,b){return"</"+(null!=a.__prefix?a.__prefix+":":"")+b+">"}function p(a,b){return-1!==a.indexOf(b,a.length-b.length)}function q(a,c){return"property"==b.arrayAccessForm&&p(c.toString(),"_asArray")||0==c.toString().indexOf(b.attributePrefix)||0==c.toString().indexOf("__")||a[c]instanceof Function?!0:!1}function r(a){var b=0;if(a instanceof Object)for(var c in a)q(a,c)||b++;return b}function s(a){var c=[];if(a instanceof Object)for(var d in a)-1==d.toString().indexOf("__")&&0==d.toString().indexOf(b.attributePrefix)&&c.push(d);return c}function t(a){var c="";return null!=a.__cdata&&(c+="<![CDATA["+a.__cdata+"]]>"),null!=a.__text&&(c+=b.escapeMode?h(a.__text):a.__text),c}function u(a){var c="";return a instanceof Object?c+=t(a):null!=a&&(c+=b.escapeMode?h(a):a),c}function v(a,b,c){var d="";if(0==a.length)d+=n(a,b,c,!0);else for(var e=0;e<a.length;e++)d+=n(a[e],b,s(a[e]),!1),d+=w(a[e]),d+=o(a[e],b);return d}function w(a){var b="",c=r(a);if(c>0)for(var e in a)if(!q(a,e)){var f=a[e],g=s(f);if(null==f||f==d)b+=n(f,e,g,!0);else if(f instanceof Object)if(f instanceof Array)b+=v(f,e,g);else if(f instanceof Date)b+=n(f,e,g,!1),b+=f.toISOString(),b+=o(f,e);else{var h=r(f);h>0||null!=f.__text||null!=f.__cdata?(b+=n(f,e,g,!1),b+=w(f),b+=o(f,e)):b+=n(f,e,g,!0)}else b+=n(f,e,g,!1),b+=u(f),b+=o(f,e)}return b+=u(a)}var x="1.1.5";b=b||{},c(),e();var y={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(b){var c=a.ActiveXObject||"ActiveXObject"in a;if(b===d)return null;var e;if(a.DOMParser){var f=new a.DOMParser,g=null;if(!c)try{g=f.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(h){g=null}try{e=f.parseFromString(b,"text/xml"),null!=g&&e.getElementsByTagNameNS(g,"parsererror").length>0&&(e=null)}catch(h){e=null}}else 0==b.indexOf("<?")&&(b=b.substr(b.indexOf("?>")+2)),e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(b);return e},this.asArray=function(a){return a instanceof Array?a:[a]},this.toXmlDateTime=function(a){return a instanceof Date?a.toISOString():"number"==typeof a?new Date(a).toISOString():null},this.asDateTime=function(a){return"string"==typeof a?k(a):a},this.xml2json=function(a){return m(a)},this.xml_str2json=function(a){var b=this.parseXmlString(a);return null!=b?this.xml2json(b):null},this.json2xml_str=function(a){return w(a)},this.json2xml=function(a){var b=this.json2xml_str(a);return this.parseXmlString(b)},this.getVersion=function(){return x}}function f(){this.app=angular.module("Endev")}angular.module("endev-templates",["endevHelper.tpl.html"]),angular.module("endevHelper.tpl.html",[]).run(["$templateCache",function(a){a.put("endevHelper.tpl.html","<style>\n  #__endev_helper__ {  \n    position: fixed;  \n    bottom: 0;  \n    left: 0;  \n    right: 0;  \n    background: #E0E0E0;  \n    border-top: 1px solid #929292;  \n    padding: 5px;  \n    font-family: sans-serif;  \n    font-size: 12px;  \n  }  \n\n  .__endev_annotation_on__ .__endev_annotated__ { \n    outline: 1px solid rgba(255,0,0,0.5); \n    /*border: 1px solid rgba(255,0,0,0.5); */\n    padding-top: 15px; \n    margin-top:5px;\n    display:block; \n  } \n\n  .__endev_annotation_on__ tbody.__endev_annotated__ {\n    display: table-row-group;\n  }\n  .__endev_annotation__ { \n    display: none; \n  }\n  .__endev_annotation_on__ .__endev_annotated__ > .__endev_annotation__ { \n    display: block; \n    position: absolute; \n    margin-top: -22px; \n    font-size: 10px; \n    font-family: monospace; \n    background: #FFFFD1; \n    color: #666; \n    padding: 1px 3px; \n    border: 1px dashed rgba(255,0,0,0.5); \n    margin-left: 5px; \n    cursor: pointer; \n  } \n  .__endev_annotated__ > .__endev_annotation__:hover { \n    background: rgba(255,255,125,0.9); \n  } \n  .__endev_annotated__ > .__endev_list_item_annotated__ { \n    outline: 1px dashed rgba(255,0,0,0.5); \n  } \n  table.__endev_annotated__, thead.__endev_annotated__, tbody.__endev_annotated__, tfoot.__endev_annotated__  { \n    /*border: 1px solid red;*/\n    padding-top: 10px; \n    margin-top: 10px; \n  } \n  table .__endev_annotated__ > .__endev_annotation__ { \n    margin-top: -1px; \n  }\n</style>\n<div id=\"__endev_helper__\">\n  Endev Tools:\n  <button ng-click=\"$endevAnnotation = !$endevAnnotation\">Annotations {{$endevAnnotation ? 'off' : 'on'}}</button>\n</div>")}]),angular.module("endev-data-tag",[]).directive("data",["$rootScope","$http","$injector","$interval","$timeout","$log","$interpolate","Expr",function(a,c,d,e,f,g,i,j){function k(){}function l(){}return{priority:1001,restrict:"E",scope:!0,link:function(a,c,m){var n=m.delay?a.$eval(m.delay):0;a.$eval(m.pending),a.$pending=!0,a.$error=null,a.$success=!1;var o=0,p=function(){if(a.$parent.$pending)f(p,100);else{var c=i(m.from,!1,null,!0)(a),e=c.split(" ")[0],q=d.get(m.provider?"$endev"+m.provider[0].toUpperCase()+m.provider.slice(1):0==c.search(/http(s)?:\/\//)?"$endevRest":"$endevYql"),r=m.from.split(" ")[1],s=m.where?m.where.split(h).map(function(b){var c=new j(b);return c.value=a.$eval(c.rhs),c.attribute=c.lhs.replace(new RegExp("^"+r+".","g"),""),c}):[];if(a.$eval(m.pending),a.$pending=!0,a.$error=null,a.$success=!1,m.log){var t=new k;t.query=new l,t.query.from=c,t.query.where=m.where}var u=b.defaults({from:e,where:m.where,params:s},b.extendOwn({},b.pick(m,function(a,b){return 0!=b.indexOf("$")})));q.query(u).then(function(b){a[r]=b,a.$eval(m.success),a.$pending=!1,a.$success=!0,m.log&&(t.results=a[r],g.info(t))})["catch"](function(b){a.$eval(m.error),a.$pending=!1,a.$success=!1,a.$error=b.description,m.retry&&(a.$pending=!0,f(p,n)),m.log&&(t.data=b,g.error(t))}),0==o&&(s.forEach(function(b){a.$watch(b.rhs,p)}),m.$observe("from",p)),o++}};f(p,n),m.refresh&&e(p,m.refresh)}}}]);var g,h=new RegExp(/ AND | OR  /i),i=new RegExp(/[=!><]+| (?:NOT )?LIKE | (?:NOT )?IN | IS (?:NOT )?NULL | (?:NOT )?MATCHES /),j=(new RegExp(/^(?:[a-zA-Z_$][0-9a-zA-Z_$]*\.)*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)/),new RegExp(/^[a-zA-Z_$][0-9a-zA-Z_$]*/));try{angular.module("firebase"),g=angular.module("Endev",["endev-templates","endev-data-tag","firebase"])}catch(k){g=angular.module("Endev",["endev-templates","endev-data-tag"])}var l=angular.injector(["ng","Endev"]);g.factory("Expr",[function(){function a(a,c){this.expression=a,this.lhs=a.split(i)[0].trim(),this.rhs=a.split(i)[1].trim(),this.operator=i.exec(a),this.attribute=this.lhs.replace(new RegExp("^"+c+".","g"),""),this.setValue=function(a){return this.value=a,this.obj=b.reduceRight(this.attribute.split("."),function(a,b){var c={};return c[b]=a,c},a),a},this.replace=function(a){return(this.attribute||this.lhs)+this.operator+a}}return a}]),g.directive("import",["$rootScope",function(b){return{compile:function(c,d){angular.forEach(d["import"].split(","),function(c){c=c.trim(),b[c]=a[c]})}}}]),b.each([["if","ng-show"],["click","ng-click"]],function(a){g.directive(a[0],["$compile",function(b){return{terminal:!0,priority:1e3,compile:function(c,d){return c.attr(a[1],d[a[0]]),c.removeAttr("data-"+a[0]),{pre:function(){},post:function(a,c){b(c)(a)}}}}}])},this),g.directive("new",["$compile",function(a){return{terminal:!0,priority:1e3,compile:function(b){return b.attr("ng-if","$isDefault"),b.removeAttr("data-new"),{pre:function(){},post:function(b,c){a(c)(b)}}}}}]),g.directive("edit",["$compile",function(a){return{terminal:!0,priority:1e3,compile:function(b){return b.attr("ng-if","!$isDefault"),b.removeAttr("data-edit"),{pre:function(){},post:function(b,c){a(c)(b)}}}}}]),g.directive("value",["$compile",function(a){return{priority:1e3,terminal:!0,compile:function(b,c){return"data-value"===c.$attr.value&&(b.attr("ng-model",c.value),b.removeAttr("data-value")),{pre:function(){},post:function(b,c,d){"data-value"===d.$attr.value&&a(c)(b)}}}}}]),g.directive("else",["$compile",function(a){return{terminal:!0,priority:1e3,compile:function(c,d){var e=b.find(c.parent().children(),function(a){return angular.element(a).next()[0]==c[0]});return e&&angular.element(e).attr("ng-show")?d.$set("ng-show","!"+angular.element(e).attr("ng-show")):console.log("data-else needs to come directly after data-if tag"),c.removeAttr("data-else"),{pre:function(){},post:function(b,c){a(c)(b)}}}}}]),g.directive("endevAnnotation",[function(){return{link:function(a,b,c){b.prepend("<span class='__endev_annotation__'>"+c.endevAnnotation+"</span>"),a.$on("$endevData_"+c.endevAnnotation,function(a,c){b.append(angular.toJson(c,!0)),a.stopPropagation()})}}}]),g.directive("endevItem",["$endevProvider","$interpolate",function(a,b){return{link:function(c,d,e){var f,g=e.endevItem,h=e.endevItem.split(" ")[1],i=b(g,!1,null,!0)(c),k=i.split(" ")[0],l=null;if(e.provider)f=a.get(e.provider,g);else{var m=i.match(j);if(m){if(f=c["$endevProvider_"+m[0]],!f)throw new Error("No self or parent provider found for:",g);l=m[0]}}if(e.autoUpdate){var n=c[h];if(n&&f.bind&&!n["default"]){console.log("Item value changed",n);var o={from:k,scope:c,label:h};o.parentObject=n,o.parentData=c["$endevData_"+h],f.bind(o)}}}}}]),g.directive("from",["$interpolate","$endevProvider","$compile","$q","Expr",function(a,c,d,e,f){function g(a){return"OPTION"===a[0].tagName?a.parent():a}return{priority:1e3,restrict:"A",scope:!0,compile:function(e,i){if("DATA"!==e[0].tagName){var k=i.from,l=i.from.split(" ")[1],m="FROM "+i.from;i.where&&(m+=" WHERE "+i.where),i.$set("ng-repeat",l+" in $endevData_"+l),i.$set("endev-item",i.from);["TBODY"].indexOf(e.parent()[0].tagName)>=0?(e.parent().addClass("__endev_annotated__"),e.parent().append("<span class='__endev_annotation__'>"+m+"</span>")):g(e).wrap("<span class='__endev_annotated__'></span>").parent().prepend("<span class='__endev_annotation__'>"+m+"</span>")}return e.removeAttr("data-from"),e.removeAttr("from"),{pre:function(){},post:function(e,g,i){if(g=d(g)(e),"DATA"!==g[0].tagName){if(angular.isDefined(e["$endevData_"+l]))throw new Error("Conflicting object "+lable+" defined by:",g);var m,n=a(k,!1,null,!0)(e),o=n.split(" ")[0],p=i.where?i.where.split(h).map(function(a){var b=new f(a,l);return b.setValue(e.$eval(b.rhs)),b}):[],q=null;if(i.provider)m=c.get(i.provider,k),e["$endevProvider_"+l]=m;else{var r=n.match(j);if(r){if(m=e["$endevProvider_"+r[0]],!m)throw new Error("No self or parent provider found for:",n);q=r[0]}}var s=b.map(p,function(a){return a.rhs});q&&s.push(q),s.length>0?e.$watchGroup(s,function(a){b.map(a.length>p.length?a.slice(0,-1):a,function(a,b){p[b].setValue(a)}),console.log("Params changed for ",k,a),v()}):i.$observe("from",function(a){n=a,console.log("From changed for",a),v()});var t,u=function(a){if(angular.isArray(a)||(a=[a]),t&&t(),a&&a.length>0||!i["default"])e.$isDefault=!1;else{var b=e.$eval(i["default"]);a.push(b),e.$isDefault=!0}e["$endevData_"+l]=a,e.$endevAnnotation&&e.$emit("$endevData_"+l,a)},v=b.throttle(function(){if(console.log("Executed with params: ",p),m){var a=b.reduce(p,function(a,c){return b.merge(c.obj,a)},{}),c=b.defaults({from:o,where:i.where,params:p,filter:a},b.extendOwn({},b.pick(i,function(a,b){return 0!=b.indexOf("$")})));q&&(c.parentLabel=q,c.parentObject=e[q],c.parentData=e["$endevData_"+q]),m.query(c,null,u).then(function(a){u(a)})["catch"](function(a){console.log("Query error: ",a)})}},100)}}}},controller:function(a){a.count=function(a){return b.size(a)}}}}]),g.directive("insertInto",["$interpolate","$endevProvider",function(a,c){return{scope:!0,link:function(d,e,f){var g,h=a(f.insertInto,!1,null,!0)(d);if(f.provider)g=c.get(f.provider,h);else{var i=h.match(j);if(i){if(g=d["$endevProvider_"+i[0]],!g)throw new Error("No self or parent provider found for:",h);parent=i[0]}}d.insert=function(a){console.log("Inserting:",a);var c={insertInto:h,newObject:a};parent&&(c.parentLabel=parent,c.parentObject=d[parent],c.parentData=d["$endevData_"+parent]),g.insert(c).then(function(c){b.isEqual(a,c)||(a=c)})}}}}]),g.directive("removeFrom",["$interpolate","$endevProvider",function(a,b){return{scope:!0,link:function(c,d,e){var f,g=a(e.removeFrom,!1,null,!0)(c);if(e.provider)f=b.get(e.provider,g);else{var h=g.match(j);if(h){if(f=c["$endevProvider_"+h[0]],!f)throw new Error("No self or parent provider found for:",g);parent=h[0]}}c.remove=function(a){console.log("Removing:",a);var b={removeFrom:g,newObject:a};parent&&(b.parentLabel=parent,b.parentObject=c[parent],b.parentData=c["$endevData_"+parent]),f.remove(b)}}}}]),g.run(["$rootScope","$document","$templateCache",function(a,b,c){a.Date=Date,a.Math=Math,a.$endevAnnotation=!1,angular.element(b[0].body).attr("ng-class","{'__endev_annotation_on__':$endevAnnotation}"),angular.element(b[0].body).append(c.get("endevHelper.tpl.html"))}]),g.directive("list",["$compile",function(a){return{terminal:!0,priority:1e3,compile:function(b,c){return b.parent().prepend("<span class='__endev_annotation__' ng-if='$annotation'>"+c.list+"</span>"),c.$set("ng-class","{'__endev_list_item_annotated__':$annotation}"),c.$set("ng-repeat",c.list),b.removeAttr("data-list"),{pre:function(){},post:function(b,c){var d=a(c)(b);b.$watch("$annotation",function(a){a?(d.parent().addClass("__endev_annotated__"),angular.element(d.parent().children()[0]).removeClass("ng-hide")):(d.parent().removeClass("__endev_annotated__"),angular.element(d.parent().children()[0]).addClass("ng-hide"))})}}}}}]),g.directive("object",["$q",function(a){return{scope:!0,compile:function(b,c){return b.prepend("<span class='__endev_annotation__' ng-if='$annotation'>"+c.object+"</span>"),{pre:function(){},post:function(b,c,d){d.$addClass("ng-hide");var e=d.object.split("=")[0].trim(),f=d.object.split("=")[1].trim();b.$watch(e,function(a){a?d.$removeClass("ng-hide"):d.$addClass("ng-hide")}),b.$watch("$annotation",function(a){a?d.$addClass("__endev_annotated__"):d.$removeClass("__endev_annotated__")}),c.on("click",function(){console.log("Clicked object")});var g;b.$watch(f,function(c){a.when(c).then(function(a){a&&a.$bindTo?(g&&g(),a.$bindTo(b,e).then(function(a){g=a})):b[e]=a})})}}}}}]),l.has("$firebaseObject")&&g.run(["$rootScope","$firebaseArray","$firebaseObject","$q",function(a){a.from=b.memoize(function(){new Firebase("https://endev.firebaseio.com")})}]),g.service("$endevProvider",["$injector",function(a){return{get:function(b,c){return a.get(b?"$endev"+b[0].toUpperCase()+b.slice(1):0==c.search(/http(s)?:\/\//)?"$endevRest":"$endevYql")}}}]),g.service("$endevYql",["$http","$q",function(a,c){return{query:function(d,e,f){var g=c.defer();if(d.parentLabel){var h=b.reduce(d.from.substring(d.parentLabel.length+1).split("."),function(a,b){return console.log("Loging path:",a,b),angular.isDefined(a)?a[b]:null},d.parentObject);f&&angular.isFunction(f)?f(h):g.resolve(h)}else{for(var i=d.where,j=0;j<d.params.length;j++)i=i.replace(d.params[j].expression,d.params[j].replace("'"+d.params[j].value+"'"));var k="select * from "+d.from+" where "+i;a.get("https://query.yahooapis.com/v1/public/yql?q="+encodeURIComponent(k)+"&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&format=json").success(function(a){console.log("Data:",a.query.results),g.resolve(a.query.results)}).error(function(a){g.reject(a)})}return g.promise}}}]),g.service("$endevRest",["$http","$interpolate","$q",function(a,b,c){function f(a,b){return b=angular.isArray(b)?b:[b],b.concat(a)}return{query:function(b){for(var g="",h=0;h<b.params.length;h++)g+=b.params[h].attribute+"="+encodeURIComponent(b.params[h].value),h<b.params.length-1&&(g+="&");var i={headers:angular.isString(b.headers)?angular.fromJson(b.headers):angular.isObject(b.headers)?b.headers:d,transformResponse:f(a.defaults.transformResponse,function(a,b){if("application/atom+xml"==b()["content-type"]){var c=new e;return c.xml_str2json(a)}return a})},j=b.from;j=-1!=j.indexOf("?")?j+"&"+g:j+"?"+g;var k=c.defer();return a.get(j,i).success(function(a){k.resolve(a)}).error(function(a){k.reject(a)}),k.promise}}}]),l.has("$firebaseObject")&&g.service("$endevFirebase",["$q","$firebaseObject","$firebaseArray",function(a,c,d){function e(a,b,c,d){if(d){var e=c.$id;return path=b?e+"/"+a.substring(b.length+1):e,console.log("Path with parent:",path),h(d.$ref,path)}return h(g,a)}function f(a,c){var d=[];return d.$endevProviderType="firebase",d.$ref=a.$ref(),b.each(a,function(a){b.isMatchDeep(a,c)&&d.push(a)}),d}var g=new Firebase("https://endev.firebaseio.com"),h=function(a,b){return b?a.child(b.replace(".","/")):null},i=[],j=function(a){var c=b.find(i,function(b){return b.callback==a});return c||(c={callback:a},i.push(c)),c};return{query:function(b,c,g){var h=a.defer();j(g).unwatch&&j(g).unwatch();var i=e(b.from,b.parentLabel,b.parentObject,b.parentData);return d(i).$loaded().then(function(a){console.log("Data:",a);var c=f(a,b.filter);c.$endevRef=i,console.log("Object:",c),g&&angular.isFunction(g)?g(c,a):h.resolve(c),j(g).unwatch=a.$watch(function(){console.log("Data changed:",a,b.where),c=f(a,b.filter),g&&angular.isFunction(g)&&g(c)})}),h.promise},insert:function(b){var c=a.defer(),f=e(b.insertInto,b.parentLabel,b.parentObject,b.parentData);return d(f).$loaded().then(function(a){a.$add(b.newObject).then(function(a){d(a).$loaded().then(function(a){c.resolve(a)})})}),c.promise},remove:function(a){console.log("Removing:",a.newObject);var b=e(a.removeFrom,a.parentLabel,a.parentObject,a.parentData);c(b).$loaded().then(function(b){c(b.$ref().child(a.newObject.$id)).$remove()})},bind:function(a){var b=e(a.from,a.parentLabel,a.parentObject,a.parentData);b&&c(b).$bindTo(a.scope,a.label)}}}]),b.merge=function(a){var c=/#{\s*?_\s*?}/,d=Array.prototype.slice;return b.each(d.call(arguments,1),function(d){for(var e in d)if(b.isNull(a[e])||b.isUndefined(a[e])||b.isFunction(a[e])||b.isNull(d[e])||b.isDate(d[e]))a[e]=d[e];else if(b.isString(d[e])&&c.test(d[e]))b.isString(a[e])&&(a[e]=d[e].replace(c,a[e]));else if(b.isArray(a[e])||b.isArray(d[e])){if(!b.isArray(a[e])||!b.isArray(d[e]))throw new Error("Trying to combine an array with a non-array ("+e+")");a[e]=b.reject(b.merge(b.clone(a[e]),d[e]),function(a){return b.isNull(a)})}else if(b.isObject(a[e])||b.isObject(d[e])){if(!b.isObject(a[e])||!b.isObject(d[e]))throw new Error("Trying to combine an object with a non-object ("+e+")");a[e]=b.merge(b.clone(a[e]),d[e])}else a[e]=d[e]}),a},b.isMatchDeep=function(a,c){c=b.extendOwn({},c);var d=b.keys(c),e=d.length;if(null==a)return!e;for(var f=Object(a),g=0;e>g;g++){var h=d[g];if(b.isObject(c[h])){if(!b.isMatchDeep(a[h],c[h]))return!1}else if(c[h]!==f[h]||!(h in f))return!1}return!0},b.matcherDeep=function(a){return function(c){return b.isMatchDeep(c,a)}};endev=a.endev=new f}(window||this,_),angular.element(document).ready(function(){angular.bootstrap(document,["Endev"])});
//# sourceMappingURL=endev.min.map